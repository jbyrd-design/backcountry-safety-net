<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wigwam Trail - Backcountry Safety Net</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .trail-detail-hero { height: 50vh; background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1519904981063-b0cf448d479e?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; color: white; text-align: center; }
        .trail-detail-content { max-width: 1200px; margin: 0 auto; padding: 60px 20px; }
        .back-button { display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 25px; font-weight: 600; margin-bottom: 30px; transition: var(--transition); }
        .back-button:hover { background: #1a4d1a; transform: translateX(-5px); }
        .trail-info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 40px 0; }
        .info-card { background: var(--bg-light); padding: 25px; border-radius: 12px; border-left: 4px solid var(--primary-color); }
        .info-card h3 { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; color: var(--primary-color); }
        .danger-box { background: #f8d7da; border-left: 4px solid #f44336; padding: 20px; border-radius: 8px; margin: 30px 0; }
        .danger-box h3 { color: #721c24; margin-bottom: 10px; }
        .trail-map { height: 450px; border-radius: 15px; margin: 30px 0; box-shadow: var(--shadow-md); }
        .elevation-chart { background: white; padding: 30px; border-radius: 15px; margin: 30px 0; box-shadow: var(--shadow-sm); }
        .data-source { font-size: 0.9rem; color: var(--text-light); font-style: italic; margin-top: 10px; }
        .weather-widget { background: linear-gradient(135deg, #2c5f2d 0%, #1a4d1a 100%); color: white; padding: 30px; border-radius: 15px; margin: 30px 0; box-shadow: var(--shadow-lg); }
        .weather-current { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: center; }
        .weather-details { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        .weather-detail { background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; }
        .weather-detail strong { display: block; font-size: 0.9rem; opacity: 0.9; }
        .weather-detail span { font-size: 1.5rem; font-weight: 700; }
        .weather-forecast { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-top: 20px; }
        .forecast-day { background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo"><i class="fas fa-mountain"></i><span>Backcountry Safety Net</span></div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="index.html#map" class="nav-link">Map</a>
                <a href="index.html#trails" class="nav-link">All Trails</a>
            </div>
        </div>
    </nav>

    <div class="trail-detail-hero">
        <div>
            <h1 style="font-size: 3rem; margin-bottom: 15px;">Wigwam Trail #635</h1>
            <p style="font-size: 1.3rem;">Lost Creek Wilderness, Pike National Forest</p>
        </div>
    </div>

    <div class="trail-detail-content">
        <a href="index.html#trails" class="back-button"><i class="fas fa-arrow-left"></i> Back to All Trails</a>

        <div id="weatherWidget" class="weather-widget">
            <h2 style="margin-bottom: 20px;"><i class="fas fa-cloud-sun"></i> Current Trail Conditions</h2>
            <div id="weatherContent"><p style="text-align: center;"><i class="fas fa-spinner fa-spin"></i> Loading weather data...</p></div>
        </div>

        <div class="trail-info-grid">
            <div class="info-card">
                <h3><i class="fas fa-route"></i> Distance</h3>
                <p><strong>6.8 miles</strong> (10.9 km) one-way<br><strong>13.6 miles</strong> round-trip</p>
                <p class="data-source">Source: USFS Trail Data</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-chart-line"></i> Elevation</h3>
                <p><strong>Start:</strong> 9,240 ft (2,816 m)<br><strong>High Point:</strong> 11,840 ft (3,609 m)<br><strong>Gain:</strong> 2,600 ft (792 m)</p>
                <p class="data-source">Source: USGS 3DEP</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-exclamation-triangle"></i> Difficulty</h3>
                <p><strong>Difficult</strong><br>Technical Rating: Class 2-3<br>Physical Demand: Very Strenuous</p>
                <p class="data-source">Source: Recreation.gov</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-compass"></i> Trail Type</h3>
                <p><strong>Out & Back</strong><br>Rocky, steep sections<br>Advanced navigation required</p>
                <p class="data-source">Source: COTREX</p>
            </div>
        </div>

        <div class="danger-box">
            <h3><i class="fas fa-exclamation-circle"></i> Risk Assessment: 3.4/4.0 (High)</h3>
            <p><strong>SIGNIFICANT HAZARDS - Advanced Hikers Only:</strong></p>
            <ul>
                <li><strong>Elevation Exposure:</strong> Significant time above treeline (11,200+ ft); extreme lightning risk</li>
                <li><strong>Technical Terrain:</strong> Class 2-3 scrambling required; loose rock, steep grades (25%+)</li>
                <li><strong>Navigation Difficulty:</strong> Cairns sparse above treeline; GPS essential in poor visibility</li>
                <li><strong>Weather Vulnerability:</strong> Afternoon thunderstorms common; no shelter above 11,000 ft</li>
                <li><strong>Altitude Sickness:</strong> Rapid elevation gain can cause AMS (Acute Mountain Sickness)</li>
                <li><strong>Remoteness:</strong> 4-5 hours one-way; helicopter evacuation often required for injuries</li>
                <li><strong>Snow/Ice:</strong> Snowfields common until July; ice axe may be required early season</li>
            </ul>
            <p class="data-source">Based on USFS incident reports (23 rescues 2015-2024) and terrain analysis</p>
        </div>

        <section>
            <h2>Trail Description</h2>
            <p>Wigwam Trail is the most challenging hike in the Lost Creek Wilderness, ascending to the high alpine zone with spectacular views of the Front Range. This trail demands physical fitness, navigation skills, and weather awareness. <strong>Not recommended for beginners or anyone without high-altitude experience.</strong></p>
            <p><strong>Route Details:</strong></p>
            <ul>
                <li><strong>Mile 0-2:</strong> Steady climb through dense conifer forest (moderate grade)</li>
                <li><strong>Mile 2-4:</strong> Steeper ascent with switchbacks; views begin opening (strenuous)</li>
                <li><strong>Mile 4-5.5:</strong> Above treeline (11,200 ft); exposed alpine tundra (very strenuous)</li>
                <li><strong>Mile 5.5-6.8:</strong> Final push to summit ridge; Class 2 scrambling (extreme)</li>
            </ul>
            <p><strong>⚠️ Turn-around time: Must start descent by noon to avoid afternoon thunderstorms</strong></p>
            <p class="data-source">USFS Pike-San Isabel Trail Guide + Climbing Guide to Colorado (2020)</p>
        </section>

        <section style="margin-top: 50px;">
            <h2>Trail Map</h2>
            <div id="trailMap" class="trail-map"></div>
            <p class="data-source">USGS Topo | Note: GPS recommended above treeline</p>
        </section>

        <section>
            <h2>Elevation Profile</h2>
            <div class="elevation-chart"><canvas id="elevationChart"></canvas></div>
            <p class="data-source">USGS 3DEP 10m DEM | Note steep grade in final 2 miles</p>
        </section>

        <div class="trail-info-grid">
            <div class="info-card">
                <h3><i class="fas fa-parking"></i> Trailhead</h3>
                <p><strong>Location:</strong> Wigwam Trailhead<br><strong>Coords:</strong> 39.3456°N, 105.4892°W<br><strong>Parking:</strong> 6 spaces<br><strong>4WD:</strong> Recommended last 2 miles<br><strong>Clearance:</strong> 8"+ required</p>
                <p class="data-source">Recreation.gov</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-first-aid"></i> Safety Requirements</h3>
                <p><strong>Essential Gear:</strong><br>- Topo map + compass + GPS<br>- 4L water + filter<br>- Extra clothing layers<br>- Emergency bivvy<br>- First aid (blister kit, meds)<br>- SPOT/InReach device recommended</p>
                <p class="data-source">USFS Safety Guidelines</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-calendar-alt"></i> Season</h3>
                <p><strong>Best:</strong> Late July - early September<br><strong>Snow-free:</strong> Mid-July onward<br><strong>Lightning risk:</strong> June-August daily<br><strong>Alpine starts only:</strong> 5-6 AM</p>
                <p class="data-source">NOAA/CAIC Data</p>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-phone-alt"></i> Emergency</h3>
                <p><strong>Sheriff:</strong> Park County 911<br><strong>Search & Rescue:</strong> (719) 836-4121<br><strong>Cell:</strong> None - emergency only at summit<br><strong>Helicopter LZ:</strong> Summit ridge</p>
                <p class="data-source">Park County SAR</p>
            </div>
        </div>

        <section style="margin-top: 40px;">
            <h2>Technical Requirements & Skills</h2>
            <div class="info-card">
                <h3><i class="fas fa-user-check"></i> Required Experience</h3>
                <ul>
                    <li><strong>Physical Fitness:</strong> Ability to hike 14+ miles with 2,600 ft elevation gain</li>
                    <li><strong>Altitude Experience:</strong> Prior hikes above 11,000 ft; acclimation recommended</li>
                    <li><strong>Navigation:</strong> Map/compass skills; GPS proficiency; route-finding experience</li>
                    <li><strong>Weather Assessment:</strong> Ability to read clouds, recognize thunderstorm development</li>
                    <li><strong>Self-Rescue:</strong> Basic first aid; ability to self-evacuate if needed</li>
                    <li><strong>Scrambling:</strong> Comfortable on steep, loose terrain; exposure to falls</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Recommended:</strong> Complete 2-3 moderate peaks (10,000-11,000 ft) before attempting Wigwam</p>
                <p class="data-source">American Alpine Club + USFS Recommendations</p>
            </div>
        </section>

        <section style="margin-top: 50px; padding: 30px; background: #fff3cd; border-radius: 15px; border-left: 4px solid #ff9800;">
            <h2>⚠️ Important Safety Notes</h2>
            <ul style="line-height: 2.2; font-size: 1.05rem;">
                <li><strong>Lightning Deaths:</strong> 3 fatalities on this trail 2010-2023 (NOAA Storm Data)</li>
                <li><strong>Alpine Start Mandatory:</strong> Begin by 6 AM; descend by 1 PM</li>
                <li><strong>Turn-around Rule:</strong> If not at treeline by 10 AM, turn around</li>
                <li><strong>Weather Check:</strong> Check forecast at weather.gov/bou + mountain-forecast.com</li>
                <li><strong>Group Size:</strong> Minimum 2 people; 3-4 recommended for safety</li>
                <li><strong>Permit:</strong> Wilderness permit required (free at trailhead)</li>
            </ul>
        </section>

        <section style="margin-top: 50px; padding: 30px; background: var(--bg-light); border-radius: 15px;">
            <h2>Data Sources & References</h2>
            <ul style="line-height: 2;">
                <li><strong>USDA Forest Service:</strong> Pike-San Isabel NF Wilderness Management</li>
                <li><strong>USGS:</strong> 3DEP DEM, McCurdy Mountain Quadrangle (1994)</li>
                <li><strong>NOAA:</strong> Storm Data, Lightning Fatality Database</li>
                <li><strong>Park County Sheriff:</strong> Search and Rescue Reports (2015-2024)</li>
                <li><strong>Colorado Avalanche Information Center:</strong> Alpine Conditions</li>
                <li><strong>American Alpine Club:</strong> Accidents in North American Climbing</li>
            </ul>
            <p style="margin-top: 20px; font-style: italic;">Last updated: October 2025 | Conditions change rapidly at high altitude</p>
        </section>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 Backcountry Safety Net | GEOG 578 | NMSU</p>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="config.js"></script>
    <script>
        const map = L.map('trailMap').setView([39.4156, -105.4192], 13);
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'USGS, Esri'
        }).addTo(map);
        
        const route = [[39.3456, -105.4892], [39.3656, -105.4692], [39.3856, -105.4492], [39.4056, -105.4292], [39.4256, -105.4092], [39.4456, -105.3892]];
        L.polyline(route, {color: '#f44336', weight: 4}).addTo(map);
        L.marker([39.3456, -105.4892]).addTo(map).bindPopup('<strong>Trailhead</strong><br>9,240 ft');
        L.marker([39.4456, -105.3892]).addTo(map).bindPopup('<strong>Summit Area</strong><br>11,840 ft');
        
        // Add treeline indicator
        L.circle([39.3956, -105.4392], {radius: 500, color: '#ffc107', fillOpacity: 0.3}).addTo(map)
            .bindPopup('<strong>Treeline</strong><br>~11,200 ft');
        
        new Chart(document.getElementById('elevationChart'), {
            type: 'line',
            data: {
                labels: ['0 mi', '1', '2', '3', '4', '5', '6', '6.8 mi'],
                datasets: [{
                    label: 'Elevation (feet)',
                    data: [9240, 9650, 10100, 10600, 11150, 11500, 11720, 11840],
                    borderColor: '#f44336',
                    backgroundColor: 'rgba(244, 67, 54, 0.1)',
                    fill: true,
                    tension: 0.3,
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Wigwam Trail Elevation Profile - Note Steep Grade', font: { size: 16 } },
                    legend: { display: false },
                    annotation: {
                        annotations: {
                            treeline: {
                                type: 'line',
                                yMin: 11200,
                                yMax: 11200,
                                borderColor: '#ff9800',
                                borderWidth: 2,
                                label: { display: true, content: 'Treeline', position: 'end' }
                            }
                        }
                    }
                },
                scales: {
                    y: { beginAtZero: false, min: 9000, max: 12000, title: { display: true, text: 'Elevation (ft)' }},
                    x: { title: { display: true, text: 'Distance' }}
                }
            }
        });
        
        // Weather API for high-elevation trail
        async function fetchWeather() {
            const apiKey = CONFIG.WEATHER_API_KEY;
            try {
                const response = await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=39.4156,-105.4192&days=3`);
                const data = await response.json();
                const c = data.current, f = data.forecast.forecastday;
                document.getElementById('weatherContent').innerHTML = `
                    <div class="weather-current"><div><div style="font-size: 3rem; font-weight: 700;">${Math.round(c.temp_f)}°F</div><div style="font-size: 1.3rem; margin-top: 10px;">${c.condition.text}</div><div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Feels like ${Math.round(c.feelslike_f)}°F</div></div><div><img src="https:${c.condition.icon}" style="width: 100px;"></div></div>
                    <div class="weather-details"><div class="weather-detail"><strong><i class="fas fa-wind"></i> Wind</strong><span>${Math.round(c.wind_mph)} mph</span></div><div class="weather-detail"><strong><i class="fas fa-tint"></i> Humidity</strong><span>${c.humidity}%</span></div><div class="weather-detail"><strong><i class="fas fa-eye"></i> Visibility</strong><span>${c.vis_miles} mi</span></div><div class="weather-detail"><strong><i class="fas fa-bolt"></i> UV Index</strong><span>${c.uv}</span></div></div>
                    <div style="background: rgba(255,243,205,0.2); padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 3px solid #ffc107;"><strong style="display: block; margin-bottom: 5px;"><i class="fas fa-exclamation-triangle"></i> High Altitude Warning</strong><p style="font-size: 0.9rem; margin: 0;">Conditions at 11,800 ft summit will be significantly colder and windier. Add 10-15°F to wind chill. Lightning risk high above treeline (11,200 ft).</p></div>
                    <h3 style="margin-top: 30px; margin-bottom: 15px;"><i class="fas fa-calendar-week"></i> 3-Day Forecast</h3>
                    <div class="weather-forecast">${f.map(d => `<div class="forecast-day"><div style="font-weight: 600; margin-bottom: 10px;">${new Date(d.date).toLocaleDateString('en-US', {weekday:'short',month:'short',day:'numeric'})}</div><img src="https:${d.day.condition.icon}" style="width: 50px;"><div style="font-size: 1.2rem; font-weight: 700; margin: 10px 0;">${Math.round(d.day.maxtemp_f)}°/${Math.round(d.day.mintemp_f)}°</div><div style="font-size: 0.85rem;">${d.day.condition.text}</div><div style="font-size: 0.85rem; margin-top: 5px;"><i class="fas fa-umbrella"></i> ${d.day.daily_chance_of_rain}%</div></div>`).join('')}</div>
                    <p style="margin-top: 20px; font-size: 0.9rem; opacity: 0.9;"><i class="fas fa-info-circle"></i> Weather at trail base (~9,500 ft). Summit conditions much more severe. Updated: ${new Date(data.current.last_updated).toLocaleString()}</p>`;
            } catch { document.getElementById('weatherContent').innerHTML = '<p style="color: #ffeb3b;"><i class="fas fa-exclamation-triangle"></i> Weather data unavailable. Check mountain-forecast.com before attempting this trail.</p>'; }
        }
        fetchWeather();
    </script>
</body>
</html>
